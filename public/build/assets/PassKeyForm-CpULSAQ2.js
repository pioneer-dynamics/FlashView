import{r as y,T as N,d as p,b as l,w as a,F as v,o as u,f as d,a as e,g as T,u as n,p as $,n as A,Q as h,t as _,e as D}from"./app-jW9V6-pq.js";import{s as E}from"./ConfirmsPasskey-CeSPvLPX.js";import{_ as P,a as V}from"./DialogModal-x2P_Ly9l.js";import{D as m}from"./datetime-DcQSltNB.js";import{_ as I}from"./TextInput-DE_-er_K.js";import{_ as M}from"./SecondaryButton-tSEqLgA6.js";import{_ as O}from"./PrimaryButton-B8T1q7JR.js";import{_ as J}from"./InputLabel-6Mn3b_kC.js";import{_ as w}from"./ConfirmsPasswordOrPasskey-1cKEnm4L.js";import"./SectionTitle-D1n5GTt3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-B0GSkxR7.js";const L={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},B={class:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400"},F={class:"odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b dark:border-gray-700"},K={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},j={class:"px-6 py-4"},R={class:"px-6 py-4"},U={key:0},z={class:"px-6 py-4"},Q={class:"odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b dark:border-gray-700"},q={colspan:"4"},G={class:"mt-2"},de={__name:"PassKeyForm",setup(H){const f=y(!1),c=y(!1),k=y(null),t=N({passkey:"",name:""}),g=()=>{f.value=!1,c.value=!1,t.reset(),t.passkey="",t.name="",t.clearErrors()},S=()=>{f.value=!0,setTimeout(()=>{var o;return(o=k.value)==null?void 0:o.focus()},250)},x=()=>{c.value=!0,t.post(route("passkeys.registration-options"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{console.log("from server",h().props.jetstream.flash.options),E(JSON.parse(JSON.stringify(h().props.jetstream.flash.options))).then(o=>{t.passkey=o,console.log(o),t.post(route("passkeys.store"),{preserveScroll:!0})}).catch(o=>console.log(o)).finally(()=>g())}})},C=o=>{t.delete(route("passkeys.destroy",{passkey:o.id}),{preserveScroll:!0})};return(o,s)=>(u(),p(v,null,[l(P,null,{title:a(()=>s[1]||(s[1]=[d("Passkeys")])),description:a(()=>s[2]||(s[2]=[d("Add passkeys to your account for highest security.")])),content:a(()=>[e("div",L,[e("table",B,[s[5]||(s[5]=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"}," Name "),e("th",{scope:"col",class:"px-6 py-3"}," Created At "),e("th",{scope:"col",class:"px-6 py-3"}," Last Access "),e("th",{scope:"col",class:"px-6 py-3 text-right"}," Action ")])],-1)),e("tbody",null,[(u(!0),p(v,null,T(o.$page.props.auth.user.passkeys,r=>{var i,b;return u(),p("tr",F,[e("th",K,_(r.name),1),e("td",j,_(n(m).fromISO(r.created_at).toLocaleString(n(m).DATETIME_MED)),1),e("td",R,[(b=(i=JSON.parse(r.public_key))==null?void 0:i.date)!=null&&b.lastAccesTs?(u(),p("span",U,_(n(m).fromSeconds(JSON.parse(r.public_key).date.lastAccesTs).toLocaleString(n(m).DATETIME_MED)),1)):D("",!0)]),e("td",z,[l(w,{seconds:60,onConfirmed:W=>C(r)},{default:a(()=>s[3]||(s[3]=[e("div",{class:"text-right"},[e("span",{class:"inline-flex items-center font-medium text-red-600 dark:text-red-500 hover:underline cursor-pointer focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-offset-red-800"},"Unregister")],-1)])),_:2},1032,["onConfirmed"])])])}),256)),e("tr",Q,[e("td",q,[l(w,{onConfirmed:S,seconds:60},{default:a(()=>s[4]||(s[4]=[e("div",{class:"text-center"},[e("span",{class:"cursor-pointer inline-flex items-center font-medium text-blue-600 dark:text-blue-500 hover:underline focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-blue-800"},"Create a Passkey?")],-1)])),_:1})])])])])])]),_:1}),l(V,{show:f.value,onClose:g},{title:a(()=>s[6]||(s[6]=[d("Create a Passkey")])),content:a(()=>[e("span",G,[l(J,{for:"name",value:"Device Name"}),l(I,{modelValue:n(t).name,"onUpdate:modelValue":s[0]||(s[0]=r=>n(t).name=r),type:"text",ref_key:"nameInput",ref:k,class:"mt-1 block w-full",onKeyup:$(x,["enter"])},null,8,["modelValue"])])]),footer:a(()=>{var r,i;return[l(M,{onClick:g},{default:a(()=>s[7]||(s[7]=[d(" Cancel ")])),_:1}),l(O,{class:A(["ml-3",{"opacity-25":n(t).processing||c.value||((r=n(t).name)==null?void 0:r.length)==0}]),disabled:n(t).processing||c.value||((i=n(t).name)==null?void 0:i.length)==0,onClick:x},{default:a(()=>s[8]||(s[8]=[d(" Register Passkey ")])),_:1},8,["class","disabled"])]}),_:1},8,["show"])],64))}};export{de as default};
